<odoo>
  <data>
    <record id="res_partner_inherit" model="ir.ui.view">
      <field name="name">res.partner.inherit</field>
      <field name="model">res.partner</field>
      <field name="inherit_id" ref="base.view_partner_form"/>
      <field name="arch" type="xml">
        <xpath expr="//form//sheet" position="before">
            <header>
                <!-- <button name="%(scan_dl_wizard)d" string="Scan DL" type="action" class="btn-primary"/> -->
            </header>
        </xpath>
        <field name="vat" position="after">
          <field name="medical_id" string="MMM ID"/>
          <field name="medical_expiration" string="MM Exp"/>
          <field name="date_of_birth" string="DOB"/>
          <field name="is_over_21" string="21+"/>
          <field name="drivers_license_number" string="Drivers #"/>
          <field name="drivers_license_expiration" string="DL Expiration"/>
          <button name="warn" string="Issue Warning" type="object" class="btn btn-primary" />
          <field name="is_banned" invisible="1"/>
          <field name="warnings" invisible="1"/>
          <div>
            <div role="img" id="oe_hr_attendance_status" class="fa fa-fw fa-circle o_button_icon" style="color: gold;" attrs="{'invisible': [('warnings', '&lt;', '1')]}" aria-label="Warning 1" title="Warning 1"/>
            <div role="img" id="oe_hr_attendance_status" class="fa fa-fw fa-circle o_button_icon" style="color: orange;" attrs="{'invisible': [('warnings', '&lt;', '2')]}" aria-label="Warning 2" title="Warning 2"/>
            <div role="img" id="oe_hr_attendance_status" class="fa fa-fw fa-circle o_button_icon" style="color: red;" attrs="{'invisible': [('warnings', '&lt;', '3')]}" aria-label="Warning 3" title="Warning 3"/>
          </div>
        </field>
        <field name="image_1920" position="before">
          <widget name="web_ribbon" title="Banned" bg_color="bg-danger" attrs="{'invisible': [('is_banned', '=', False)]}"/>
        </field>
      </field>
    </record>

<!-- Kanban View for tasks -->
    <record id="view_project_kanban_inherit" model="ir.ui.view">
      <field name="name">project.task.inherit</field>
      <field name="model">project.task</field>
      <field name="inherit_id" ref="project.view_task_kanban"/>
      <field name="arch" type="xml">
        <xpath expr="/kanban/templates/t/div//div[@class='oe_kanban_content']" position="after">
          <field name="partner_id" widget="res_partner_many2one"/>
          <br/>
          <span class="glyphicon glyphicon-envelope"></span>
          <span id="time_counter"></span>
          <field name="timer_start" widget="timer_timer">
            <attribute class="o_field_widget o_readonly_modifier text-danger ml-auto h5 ml-4 font-weight-bold"/>
          </field>
          <!-- <script defer="defer">
            $("[name='timer_start']").addClass("o_readonly_modifier text-danger ml-auto h5 ml-4 font-weight-bold");
          </script> -->
          
          <!-- <script defer="defer">
          defined = false;
          async function run_timer(){
           ticks = 0;
           span_list = false;
           while (true){
              await new Promise(r => setTimeout(r, 1000));
              timer = new Array();
              if (!span_list){
                span_list = document.querySelectorAll("span#time_counter");
              }
              for (i = 0; i &lt; span_list.length; i++) {
                  minutes = Math.floor(ticks/60);
                  if (minutes &lt; 10){
                    minutes = "0" + String(minutes);
                  }
                  seconds = ticks % 60;
                  if (seconds &lt; 10){
                    seconds = "0" + String(seconds);
                  }
                  span_list[i].innerHTML = String(minutes) + ":" + String(seconds);
              }
              ticks += 1;
            }
          }
          if (!defined){
            run_timer();
            defined = true;
          }
          </script> -->
        </xpath>
      </field>
    </record>

    <!-- Quick Create task menu -->
    <record id="view_project_kanban_quick_create_inherit" model="ir.ui.view">
      <field name="name">project.task.quick_create.inherit</field>
      <field name="model">project.task</field>
      <field name="inherit_id" ref="project.quick_create_task_form"/>
      <field name="type">form</field>
      <field name="arch" type="xml">
        <field name="name" position="before">
          <button name="%(scan_dl_wizard)d" string="Scan DL" type="action" class="btn-primary"/>
        </field>
        <field name="name" position="after">
          <field name="partner_id"/>
        </field>
      </field>
    </record>

    <!-- Product Additions -->
    <record id="product_template_inherit" model="ir.ui.view">
      <field name="name">product.template.product.form</field>
      <field name="model">product.template</field>
      <field name="inherit_id" ref="product.product_template_only_form_view"/>
      <field name="arch" type="xml">
        <field name="barcode" position="after">
          <field name="is_medical" string="Is Medical Product" />
        </field>
      </field>
    </record>
  </data>
</odoo>
